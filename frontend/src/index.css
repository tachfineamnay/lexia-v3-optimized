@import "tailwindcss";
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

/* === BASE STYLES & ACCESSIBILITY === */
@layer base {
  /* Réinitialisation de base pour tous les éléments */
  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  /* Comportement de défilement doux pour l'accessibilité */
  html {
    scroll-behavior: smooth;
    -webkit-text-size-adjust: 100%;
  }

  /* Styles de corps globaux, utilisant la famille de polices et les couleurs définies dans tailwind.config.js */
  body {
    @apply font-sans leading-relaxed text-neutral-800 bg-neutral-50 antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Styles pour le conteneur racine de l'application */
  #root {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  /* Gestion du focus visible pour l'accessibilité, utilisant la couleur primaire étendue */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2 ring-offset-neutral-0;
  }

  /* Personnalisation de la barre de défilement pour une meilleure esthétique */
  ::-webkit-scrollbar {
    @apply w-1.5 h-1.5;
  }

  ::-webkit-scrollbar-track {
    @apply bg-neutral-100;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-neutral-300 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-neutral-400;
  }

  /* Style de sélection de texte */
  ::selection {
    @apply bg-primary-200 text-primary-800;
  }
}

/* === COMPONENTS === */
@layer components {
  /* Typography */
  .heading-1 {
    @apply text-5xl font-extrabold tracking-tight text-neutral-900;
  }
  .heading-2 {
    @apply text-4xl font-bold tracking-tight text-neutral-900;
  }
  .heading-3 {
    @apply text-3xl font-semibold tracking-tight text-neutral-800;
  }
  .heading-4 {
    @apply text-2xl font-semibold tracking-tight text-neutral-800;
  }
  .body-large {
    @apply text-lg text-neutral-700 leading-relaxed;
  }
  .body-normal {
    @apply text-base text-neutral-600 leading-relaxed;
  }
  .body-small {
    @apply text-sm text-neutral-500 leading-normal;
  }
  .caption {
    @apply text-xs font-medium uppercase tracking-wider text-neutral-400;
  }

  /* Button System */
  .btn {
    @apply inline-flex items-center justify-center gap-2 border-none rounded-lg font-medium font-sans cursor-pointer transition-all duration-fast no-underline whitespace-nowrap select-none outline-none relative overflow-hidden;
  }

  .btn:disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }

  /* Tailles de boutons */
  .btn-sm {
    @apply h-9 px-3 text-sm;
  }

  .btn-md {
    @apply h-11 px-4 text-base;
  }

  .btn-lg {
    @apply h-13 px-6 text-lg;
  }

  /* Variantes de boutons */
  .btn-primary {
    @apply bg-gradient-to-br from-primary-500 to-primary-600 text-white shadow-md;
  }

  .btn-primary:hover {
    @apply from-primary-600 to-primary-700 shadow-lg -translate-y-px;
  }

  .btn-secondary {
    @apply bg-neutral-0 text-neutral-700 border border-neutral-200 shadow-sm;
  }

  .btn-secondary:hover {
    @apply bg-neutral-50 border-neutral-300 shadow-md;
  }

  .btn-ghost {
    @apply bg-transparent text-neutral-600;
  }

  .btn-ghost:hover {
    @apply bg-neutral-100 text-neutral-800;
  }

  /* Input System & Form Fields */
  .input {
    @apply w-full border border-neutral-200 rounded-lg p-3 px-4 text-base leading-normal text-neutral-800 bg-neutral-0 transition-all duration-fast outline-none;
  }

  .input:focus {
    @apply border-primary-500 shadow-[0_0_0_3px_theme(colors.primary.200)];
  }

  .input:disabled {
    @apply bg-neutral-50 text-neutral-400 cursor-not-allowed;
  }

  .input-error {
    @apply border-error-500;
  }

  .input-error:focus {
    @apply border-error-500 shadow-[0_0_0_3px_theme(colors.error.200)];
  }

  .lexia-form-group {
    @apply mb-4;
  }

  .lexia-label {
    @apply block font-medium text-neutral-700 mb-1;
  }

  .lexia-textarea {
    @apply min-h-[120px] resize-y;
  }

  /* States de validation */
  .lexia-input-success {
    @apply border-success-500;
  }

  .lexia-input-error {
    @apply border-error-500;
  }

  .lexia-helper-text {
    @apply text-sm mt-1;
  }

  .lexia-helper-success {
    @apply text-success-600;
  }

  .lexia-helper-error {
    @apply text-error-600;
  }

  /* Card System */
  .card {
    @apply bg-neutral-0 border border-neutral-200 rounded-xl overflow-hidden transition-all duration-normal;
  }

  .card-hover {
    @apply cursor-pointer;
  }

  .card-hover:hover {
    @apply border-neutral-300 shadow-lg -translate-y-px;
  }

  .card-body {
    @apply p-6;
  }

  .card-header {
    @apply p-6 border-b border-neutral-200;
  }

  .card-footer {
    @apply p-6 border-t border-neutral-200 bg-neutral-50;
  }

  /* Badge System */
  .badge {
    @apply inline-flex items-center gap-1 p-1 px-2 rounded-full text-xs font-medium leading-tight;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-700;
  }

  .badge-success {
    @apply bg-success-50 text-success-600;
  }

  .badge-warning {
    @apply bg-warning-50 text-warning-600;
  }

  .badge-error {
    @apply bg-error-50 text-error-600;
  }

  /* Alert System */
  .lexia-alert {
    @apply p-4 rounded-md border-l-4;
  }

  .lexia-alert-success {
    @apply lexia-alert bg-success-50 border-success-500 text-success-700;
  }

  .lexia-alert-warning {
    @apply lexia-alert bg-warning-50 border-warning-500 text-warning-700;
  }

  .lexia-alert-error {
    @apply lexia-alert bg-error-50 border-error-500 text-error-700;
  }

  .lexia-alert-info {
    @apply lexia-alert bg-primary-50 border-primary-500 text-primary-700;
  }

  /* Navigation */
  .lexia-nav-link {
    @apply inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200;
  }

  .lexia-nav-link-active {
    @apply lexia-nav-link border-primary-500 text-primary-600;
  }

  .lexia-nav-link-inactive {
    @apply lexia-nav-link border-transparent text-neutral-500 hover:border-neutral-300 hover:text-neutral-700;
  }

  /* Layout Utilities */
  .container {
    @apply w-full max-w-screen-xl mx-auto px-4;
  }

  .container-sm {
    @apply max-w-screen-sm;
  }

  .container-md {
    @apply max-w-screen-md;
  }

  .container-lg {
    @apply max-w-screen-lg;
  }

  .flex-center {
    @apply flex items-center justify-center;
  }

  .flex-between {
    @apply flex items-center justify-between;
  }

  .absolute-center {
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
  }

  /* Progress Indicator */
  .lexia-progress-bar {
    @apply w-full h-2 bg-neutral-200 rounded-full overflow-hidden;
  }

  .lexia-progress-fill {
    @apply h-full bg-primary-500 transition-all duration-normal;
  }

  /* Tooltips */
  .lexia-tooltip {
    @apply relative inline-block;
  }

  .lexia-tooltip-content {
    @apply invisible absolute z-10 p-2 text-sm text-white bg-neutral-900 rounded-md opacity-0 transition-opacity duration-normal;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-bottom: theme('spacing.2');
  }

  .lexia-tooltip:hover .lexia-tooltip-content {
    @apply visible opacity-100;
  }

  /* Modal System */
  .lexia-modal-backdrop {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] backdrop-blur-sm;
  }

  .lexia-modal {
    @apply bg-neutral-0 rounded-xl shadow-xl max-w-lg w-11/12 max-h-[90vh] overflow-y-auto animate-[modalSlideIn_0.3s_ease-out];
  }

  @keyframes modalSlideIn {
    from {
      opacity: 0;
      transform: translateY(theme('spacing.5'));
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Tables */
  .lexia-table {
    @apply min-w-full divide-y divide-neutral-200;
  }

  .lexia-table-header {
    @apply bg-neutral-50;
  }

  .lexia-table-header-cell {
    @apply px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider;
  }

  .lexia-table-body {
    @apply bg-neutral-0 divide-y divide-neutral-200;
  }

  .lexia-table-row {
    @apply hover:bg-neutral-50;
  }

  .lexia-table-cell {
    @apply px-6 py-4 whitespace-nowrap text-sm text-neutral-500;
  }

  /* Loading States */
  .loading {
    @apply opacity-60 pointer-events-none;
  }

  .spinner {
    @apply w-6 h-6 border-2 border-neutral-200 border-t-primary-500 rounded-full animate-spin;
  }

  .lexia-loading {
    @apply animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500;
  }

  /* File Upload */
  .lexia-file-upload {
    @apply block w-full text-sm text-neutral-500
      file:mr-4 file:py-2 file:px-4
      file:rounded-md file:border-0
      file:text-sm file:font-semibold
      file:bg-primary-50 file:text-primary-700
      hover:file:bg-primary-100;
  }

  /* Pagination */
  .lexia-pagination {
    @apply relative z-0 inline-flex rounded-md shadow-sm -space-x-px;
  }

  .lexia-pagination-button {
    @apply relative inline-flex items-center px-2 py-2 border border-neutral-300 bg-neutral-0 text-sm font-medium text-neutral-500 hover:bg-neutral-50;
  }

  .lexia-pagination-button-active {
    @apply z-10 bg-primary-50 border-primary-500 text-primary-600;
  }

  /* Filters */
  .lexia-filter-button {
    @apply px-3 py-2 rounded-md text-sm font-medium;
  }

  .lexia-filter-button-active {
    @apply bg-primary-100 text-primary-700;
  }

  .lexia-filter-button-inactive {
    @apply bg-neutral-100 text-neutral-700 hover:bg-neutral-200;
  }
}

/* === KEYFRAMES === */
/* Animations utilisées par les utilitaires Tailwind */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(theme('spacing.2')); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(theme('spacing.4')); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.95); }
  to { opacity: 1; transform: scale(1); }
}

/* === UTILITIES === */
@layer utilities {
  .animate-fade-in {
    @apply animate-[fadeIn_0.3s_ease-out_forwards];
  }

  .animate-slide-in {
    @apply animate-[slideIn_0.3s_ease-out_forwards];
  }

  .animate-scale-in {
    @apply animate-[scaleIn_0.2s_ease-out_forwards];
  }

  .gradient-text {
    @apply bg-gradient-to-r from-primary-500 to-primary-700 bg-clip-text text-transparent;
  }

  /* Responsive Design - Ajouté ici car @screen est un utilitaire */
  @screen md {
    .container {
      @apply px-3;
    }

    .heading-1 {
      @apply text-4xl;
    }

    .heading-2 {
      @apply text-3xl;
    }

    .heading-3 {
      @apply text-2xl;
    }
  }
}
